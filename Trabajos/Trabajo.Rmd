---
title: "Trabajo de Introducción a la Ciencia de Datos"
author: "Lidia Sánchez Mérida"
output: pdf_document
urlcolor: blue
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# Cargamos las librerías al inicio
library(car)
library(tidyverse)
```

# 1. Apartado de Regresión (abalone)

El dataset con el que se procede a trabajar para este primer apartado relativo a la aplicación de técnicas de Regresión se denomina **`abalone`**. En primer lugar, buscamos información sobre sus datos para descubrir sus características principales y composición. Según la descripción que proporciona [Kaggle](https://www.kaggle.com/rodolfomendes/abalone-dataset), se trata de un conjunto de **medidas físicas realizadas sobre un tipo de molusco para determinar su edad**. Por otro lado, en la página de [UCI Machine Learning Repository](https://archive.ics.uci.edu/ml/datasets/abalone) se detallan los siguientes aspectos:

* Dispone de un total de **9 variables** de diferente naturaleza:

| Variable | Tipo | Descripción | Valores |
|---|---|---|---|
| Sex | Nominal | Género del ejemplar | M (masculino), F (femenino), I (infante) |
| Length | Real | Longitud de la concha  | Milímetros |
| Diameter |  Real |  Ancho de la concha |  Milímetros |
| Height |  Real |  Altura del ejemplar | Milímetros |
| Whole weight |  Real |  Peso total del ejemplar | Gramos  |
| Shucked weight |  Real |  Peso del ejemplar sin la concha | Gramos |
| Viscera weight |  Real |  Peso de las vísceras del ejemplar | Gramos |
| Shell weight | Real  |  Peso de la concha sin el ejemplar |  Gramos |
| Rings | Entero  | Edad del animal (+1.5)  |   |
  
* Se trata de un conjunto de datos asociado a un problema de clasificación.
* **No contiene valores perdidos o nulos**.

## 1.1. Análisis Exploratorio de Datos

A continuación, en este subapartado procedemos a analizar las principales propiedades de este conjunto de datos. En primer lugar cargamos el dataset desde el fichero `abalone.dat`, especificamos el separador para distinguir los valores de cada columna y asignamos manualmente el nombre de las variables a partir de la líneas `@inputs` y `@outputs` del fichero. Como podemos apreciar en el siguiente *chunk* este dataset cuenta con **4.177 registros y 9 variables**. En el caso de la columna que indica el **género podemos apreciar que ya está codificada en este fichero**, por lo que asumiremos que las etiquetas numéricas corresponden a los siguientes valores nominales: 1-masculino, 2-femenino y 3-infante.

```{r}
# Nombres de las variables según el fichero `abalone.data`
abalone.colnames <- c("Sex", "Length", "Diameter", "Height", "Whole_weight", 
                  "Shucked_weight", "Viscera_weight", "Shell_weight", "Ring")
# Leemos el dataset del fichero `abalone.dat`
abalone.df <- read.table("./abalone/abalone.dat", header=FALSE, skip=13, 
                         sep=",", col.names=abalone.colnames)
# Dimensión 
dim(abalone.df)
# Tipos de las variables
str(abalone.df)
```
A continuación aplicamos la función `summary` para obtener un resumen con las principales medidas estadísticas para cada variable. Tal y como se puede observar, el primer aspecto interesante ocurre en la variable `Sex` puesto que según sus cuartiles, en el primer intervalo se encuentran mayoritariamente ejemplares masculinos (etiqueta 1), mientras que en el último intervalo destacan más aquellos clasificados como infantes (etiqueta 3). Por otro lado, podemos apreciar que el ejemplar intermedio es femenino puesto que la mediana es 2. Esta distribución puede indicarnos que **esta variable de clase está balanceada** y existe aproximadamente el mismo número de ejemplares para cada categoría.

En relación con las dimensiones de la concha, podemos observar que no existe demasiada diferencia entre los respectivos cuartiles de las variables `Length` y `Diameter`. Además, sus medias y medianas son valores más cercanos al dato máximo, por lo que podemos intuir que existe una **concentración de ejemplares con una concha de mayor envergadura**. Sin embargo, este hecho contrasta con los valores de la variable `Height`, en los cuales destacan los siguientes aspectos:

1. En primer lugar me resulta extraño que existan **ejemplares con una altura de 0 milímetros**, incluyendo tanto la concha como el animal en el interior. No se conoce cómo se han realizado las mediciones y por lo tanto si podrían ser datos erróneos, pero este tipo de valores parecen ser interesantes para un estudio individualizado.

2. Por otro lado, la diferencia entre los cuartiles Q1 y Q3 es aún más reducida que en los casos anteriores, lo que simboliza una **concentración de ejemplares de baja altura**. Si además observamos la media y la mediana, también son valores más cercanos al mínimo.

```{r}
# Resumen del dataset
summary(abalone.df)
```
En el caso de las medidas relativas a los diferentes tipos de pesos, parece haber una mayor dispersión de valores puesto que existen mayores diferencias entre sus respectivos cuartiles. No obstante, también podemos observar que sus medias y medianas son valores más cercanos al límite inferior de sus respectivos rangos de valores. Esto nos indica que **la mayoría de ejemplares no son pesados**, lo cual puede contrastar con las elevadas dimensiones de las conchas que hemos observado anteriormente.

Finalmente, cabe destacar que en la variable independiente `Ring` tampoco existe una diferencia considerable entre sus cuartiles, y su media y mediana son valores cercanos al mínimo, por lo que parece que en el conjunto de datos hay una **mayor representación de ejemplares jóvenes**. 

### 1.1.1. Análisis Multivariante

En esta sección se pretenden realizar diversos análisis considerando la gran mayoría de variables con el objetivo de formar una idea generalizada de este conjunto de datos. Así, en primer lugar vamos a representar una **matriz de puntos con todas las variables disponibles**. En la diagonal se ha elegido representar las **curvas de densidad para visualizar sus respectivas distribuciones**. Aunque la aplicación de este tipo de gráfico no tenga sentido sobre una variable de clase, como es `Sex`, la incluimos para observar las características de cada categoría y aplicar un **filtro por género** con el que representar cada clase de un color y formas diferentes. De este modo, enriquecemos el gráfico con más información y nos permite comenzar a constrastar las conclusiones obtenidas anteriormente.

Comenzamos analizando las curvas de densidad. Si observamos las distribuciones de todas las variables excepto `Sex` podemos apreciar que la de los ejemplares masculinos y femeninos son prácticamente idénticas, puesto que se superponen en muchas de las gráficas. Este hecho puede indicarnos que **no existen diferencias físicas entre los principales géneros** de esta especie. No ocurre lo mismo con el caso de los infantes, ya que sus valores son inferiores en cada una de las medidas con respecto a los otros dos géneros, lo cual me parece bastante lógico.

Por otro lado, si observamos las curvas de densidad de las variables `Length` y `Diameter` podemos afirmar la teoría anterior de que la mayoría de los ejemplares disponen de unas **conchas muy voluminosas en contraposición con la altura**, puesto que los valores de `Height` están mayormente concentrados al comienzo del intervalo. Esto nos puede indicar que este tipo de molusco dispone de una gran amplitud aunque de un grosor fino. Como se ha comentado anteriormente, en el caso de las medidas relativas a los diferentes pesos podemos observar que existe una mayor variabilidad puesto que su rango de valores es más amplio. De igual modo, si observamos las curvas de densidad de la variable independiente `Ring` podemos apreciar que la **mayoría de los ejemplares son bastante jóvenes** ya que el intervalo donde se concentran más es [5, 15]. 

```{r}
# Parámetros
# 1. Representar solo la diagonal inferior porque la matriz es simétrica
# 2. Diferenciar los ejemplares por género cambiando el color y su forma
# 2.1. Masculino: círculos azules.
# 2.2. Femenino: triángulos naranjas.
# 2.3. Infantes: cruces grises.
# 3. Representar curvas de densidad en la diagonal
scatterplotMatrix(abalone.df, diagonal=list(method="density"), 
                  upper.panel=NULL, col=c("blue", "orange", "gray"),
                  group=as.factor(abalone.df$Sex))
```
La segunda parte de este estudio consiste en analizar las posibles relaciones entre diversos pares de variables. Tal y como podemos observar, parece ser que **la longitud está relacionada linealmente con el diámetro** de la concha, puesto que su gráfica asociada prácticamente representa una recta estrictamente creciente. Por lo que a mayor longitud de la concha, mayor diámetro, algo que puede parecer bastante lógico. Una situación similar ocurre con el resto de variables, ya que en todas las gráficas relacionadas con la variable `Length` se puede visualizar una función creciente, siendo de menor intensidad en el caso de la variable `Height`, cuya representación se parece más a una raíz cuadrada. Todas estas conclusiones parecen ser aplicables también a la variable `Diameter` puesto que las gráficas con el resto de variables son muy similares. Continuando con los diferentes pesos también podemos observar que se encuentran relacionados entre sí de forma creciente, por lo que podemos intuir que **durante el desarrollo de los ejemplares sus diferentes medidas de peso siguen una misma tendencia a la alza**. 

Un caso peculiar lo encontramos entre la variable `Height` y las variables asociadas a los diferentes pesos. Si observamos sus gráficas, podemos apreciar un crecimiento muy considerable y abrupto al comienzo del intervalo, es decir, existe una concentración de **ejemplares con una elevada altura y bajos pesos**. Sin embargo, a diferencia del resto de gráficas, en estos casos podemos observar que existen varias muestras que no siguen esta tendencia, ya que sus alturas disminuyen conforme aumentan sus pesos. 

Finalmente, si observamos la variable independiente `Ring` podemos apreciar que es creciente con respecto a la longitud y diámetro, por lo que parece que los ejemplares de **mayor edad, tienen una concha de mayor longitud y diámetro**. Con respecto a los pesos hay una mayor variabilidad, aunque en el caso del peso asociado a la concha sí se aprecia un aumento de sus valores conforme mayor es la edad. Sin embargo, en las restantes variables podemos observar que existen diferencias entre los distintos géneros. Mientras que la tendencia de los infantes en todas las variables de pesos se mantiene creciente, existen ejemplares masculinos y femeninos cuyos tamaños se estabilizan e incluso se reducen conforme aumenta la edad.

#### Conclusiones

<<<<<<<<<<<<<<<<<<<< CONCLUSIONES>>>>>>>>>>>>>>>>>>>>>>>
<<<<<<<<<<<<<<<<<<<<< CORRELACIÓN>>>>>>>>>>>>>>>>

